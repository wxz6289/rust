# Rust ç¼–ç¨‹è¯­è¨€æŒ‡å—

Rust æ˜¯ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ã€‚

## è¯­è¨€ç‰¹æ€§

### æ ¸å¿ƒç‰¹æ€§

- **å†…å­˜å®‰å…¨**ï¼šæ— åƒåœ¾å›æ”¶å™¨çš„æƒ…å†µä¸‹ä¿è¯å†…å­˜å®‰å…¨
- **é›¶æˆæœ¬æŠ½è±¡**ï¼šé«˜çº§ç‰¹æ€§ä¸ä¼šå¸¦æ¥è¿è¡Œæ—¶å¼€é”€
- **æ‰€æœ‰æƒç³»ç»Ÿ**ï¼šç‹¬ç‰¹çš„æ‰€æœ‰æƒæ¨¡å‹ç®¡ç†å†…å­˜
- **å¹¶å‘å®‰å…¨**ï¼šé˜²æ­¢æ•°æ®ç«äº‰ï¼Œå®‰å…¨å¤„ç†å¹¶å‘
- **é¢„ç¼–è¯‘é™æ€è¯­è¨€**ï¼šç¼–è¯‘åæ— éœ€è¿è¡Œæ—¶ç¯å¢ƒ

### ç¼–ç¨‹èŒƒå¼

- **éé¢å‘å¯¹è±¡**ï¼šä¸æ”¯æŒä¼ ç»Ÿç»§æ‰¿ï¼Œä½†æä¾›æ–¹æ³•è¯­æ³•
- **å‡½æ•°å¼ç¼–ç¨‹**ï¼šæ”¯æŒé«˜é˜¶å‡½æ•°ã€é—­åŒ…ç­‰ç‰¹æ€§
- **æ³›å‹ç¼–ç¨‹**ï¼šå¼ºå¤§çš„ç±»å‹ç³»ç»Ÿå’Œæ³›å‹æ”¯æŒ
- **æ¨¡å¼åŒ¹é…**ï¼šå¼ºå¤§çš„ match è¡¨è¾¾å¼

### è¯­æ³•ç‰¹ç‚¹

- **ç±»å‹æ³¨è§£**ï¼šé™æ€ç±»å‹æ£€æŸ¥
- **æ¡ä»¶ç¼–è¯‘**ï¼šæ ¹æ®æ¡ä»¶ç¼–è¯‘ä¸åŒä»£ç 
- **éšå¼è¿”å›**ï¼šå‡½æ•°æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼
- **å…±äº«ä¸å¯å˜ï¼Œå¯å˜ä¸å…±äº«**ï¼šæ ¸å¿ƒå€Ÿç”¨è§„åˆ™

## ä¸ºä»€ä¹ˆé€‰æ‹© Rustï¼Ÿ

### ä¼˜åŠ¿

- **ğŸš€ é«˜æ€§èƒ½**
  - é€Ÿåº¦æƒŠäººä¸”å†…å­˜åˆ©ç”¨ç‡æé«˜
  - æ— è¿è¡Œæ—¶å’Œåƒåœ¾å›æ”¶å¼€é”€
  - è½»æ¾ä¸å…¶ä»–è¯­è¨€é›†æˆ

- **ğŸ›¡ï¸ å¯é æ€§**
  - ä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿä¿è¯å†…å­˜å®‰å…¨
  - æ‰€æœ‰æƒæ¨¡å‹ç¡®ä¿çº¿ç¨‹å®‰å…¨
  - ç¼–è¯‘æœŸæ¶ˆé™¤å„ç§é”™è¯¯

- **âš¡ å¼€å‘æ•ˆç‡**
  - å‡ºè‰²çš„æ–‡æ¡£å’Œå‹å¥½çš„ç¼–è¯‘å™¨
  - æ¸…æ™°çš„é”™è¯¯æç¤ºä¿¡æ¯
  - ä¸€æµçš„åŒ…ç®¡ç†å’Œæ„å»ºå·¥å…·
  - æ™ºèƒ½ä»£ç è¡¥å…¨å’Œç±»å‹æ£€éªŒ

### åº”ç”¨é¢†åŸŸ

- **ç³»ç»Ÿç¼–ç¨‹**ï¼šæ“ä½œç³»ç»Ÿã€é©±åŠ¨ç¨‹åº
- **ç½‘ç»œæœåŠ¡**ï¼šé«˜æ€§èƒ½ Web æœåŠ¡å™¨
- **å‘½ä»¤è¡Œå·¥å…·**ï¼šè·¨å¹³å°å‘½ä»¤è¡Œåº”ç”¨
- **WebAssembly**ï¼šé«˜æ€§èƒ½ Web åº”ç”¨
- **åµŒå…¥å¼å¼€å‘**ï¼šç‰©è”ç½‘è®¾å¤‡
- **åŒºå—é“¾**ï¼šåŠ å¯†è´§å¸å’Œæ™ºèƒ½åˆçº¦
- **æ¸¸æˆå¼€å‘**ï¼šé«˜æ€§èƒ½æ¸¸æˆå¼•æ“

### å®‰å…¨æ€§ä¿éšœ

Rust åœ¨ç¼–è¯‘æœŸé˜²æ­¢ä»¥ä¸‹å¸¸è§å®‰å…¨é—®é¢˜ï¼š

- **æ‚¬å‚æŒ‡é’ˆ**ï¼šé˜²æ­¢è®¿é—®å·²é‡Šæ”¾çš„å†…å­˜
- **æ•°æ®ç«äº‰**ï¼šç¡®ä¿å¹¶å‘è®¿é—®çš„å®‰å…¨æ€§
- **ç¼“å†²åŒºæº¢å‡º**ï¼šé˜²æ­¢è¶Šç•Œè®¿é—®
- **è¿­ä»£å™¨å¤±æ•ˆ**ï¼šç¡®ä¿è¿­ä»£è¿‡ç¨‹ä¸­é›†åˆä¸è¢«ä¿®æ”¹

### æŒ‘æˆ˜ä¸é™åˆ¶

- **å­¦ä¹ æ›²çº¿é™¡å³­**ï¼šæ‰€æœ‰æƒæ¦‚å¿µéœ€è¦æ—¶é—´ç†è§£
- **ç¼–è¯‘é€Ÿåº¦**ï¼šç›¸æ¯”è§£é‡Šå‹è¯­è¨€ç¼–è¯‘è¾ƒæ…¢
- **ä¸¥æ ¼çš„å€Ÿç”¨æ£€æŸ¥**ï¼šæŸäº›å¤æ‚æ•°æ®ç»“æ„å®ç°å›°éš¾
- **ç”Ÿæ€ç³»ç»Ÿ**ï¼šç›¸æ¯”æˆç†Ÿè¯­è¨€åº“è¾ƒå°‘ï¼ˆä½†åœ¨å¿«é€Ÿå‘å±•ï¼‰

## ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿ

Rust çš„å®‰å…¨æ€§æ£€æŸ¥åŸºäºç”Ÿå‘½å‘¨æœŸç³»ç»Ÿï¼Œå®ƒèƒ½å¤ŸéªŒè¯æ‰€æœ‰å¯¹æ•°æ®çš„è®¿é—®æ˜¯å¦æœ‰æ•ˆã€‚ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿé€šå¸¸æ˜¯è‡ªåŠ¨æ¨æ–­çš„ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼Œä½†åœ¨æŸäº›å¤æ‚æƒ…å†µä¸‹éœ€è¦æ˜¾å¼æ ‡æ³¨ã€‚

## å®‰è£… Rust

### å®˜æ–¹å®‰è£…æ–¹å¼

ä½¿ç”¨ rustupï¼ˆæ¨èï¼‰ï¼š

```bash
# ä¸‹è½½å¹¶å®‰è£… rustup
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# é…ç½®ç¯å¢ƒå˜é‡
source $HOME/.cargo/env

# æˆ–è€…æ‰‹åŠ¨æ·»åŠ åˆ° shell é…ç½®æ–‡ä»¶
echo 'export PATH="$HOME/.cargo/bin:$PATH"' >> ~/.bash_profile
# å¯¹äº zsh ç”¨æˆ·
echo 'export PATH="$HOME/.cargo/bin:$PATH"' >> ~/.zshrc

# éªŒè¯å®‰è£…
rustc --version
cargo --version
```

### macOS é¢å¤–è¦æ±‚

å®‰è£… C ç¼–è¯‘å™¨ï¼ˆXcode Command Line Toolsï¼‰ï¼š

```bash
xcode-select --install
```

### Rust å·¥å…·é“¾ç®¡ç†

```bash
# æ›´æ–° Rust åˆ°æœ€æ–°ç‰ˆæœ¬
rustup update

# æŸ¥çœ‹å·²å®‰è£…çš„å·¥å…·é“¾
rustup show

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
rustup install stable
rustup install beta
rustup install nightly

# è®¾ç½®é»˜è®¤å·¥å…·é“¾
rustup default stable

# æ·»åŠ ç»„ä»¶
rustup component add rustfmt    # ä»£ç æ ¼å¼åŒ–å·¥å…·
rustup component add clippy     # ä»£ç æ£€æŸ¥å·¥å…·
rustup component add rls        # Language Server

# æŸ¥çœ‹æœ¬åœ°æ–‡æ¡£
rustup doc

# å®Œå…¨å¸è½½ Rust
rustup self uninstall
```

## æ ¸å¿ƒå·¥å…·é“¾

### rustc - ç¼–è¯‘å™¨

```bash
# ç›´æ¥ç¼–è¯‘ Rust æ–‡ä»¶
rustc main.rs

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å
rustc main.rs -o my_program

# ç¼–è¯‘æ—¶ä¼˜åŒ–
rustc -O main.rs

# æŸ¥çœ‹ç¼–è¯‘é€‰é¡¹
rustc --help
```

### cargo - åŒ…ç®¡ç†å™¨

Cargo æ˜¯ Rust çš„æ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å™¨ï¼Œæä¾›é¡¹ç›®ç®¡ç†ã€ä¾èµ–ç®¡ç†ã€æ„å»ºå’Œå‘å¸ƒç­‰åŠŸèƒ½ã€‚

#### é¡¹ç›®åˆ›å»ºä¸åˆå§‹åŒ–

```bash
# åˆ›å»ºæ–°çš„äºŒè¿›åˆ¶é¡¹ç›®
cargo new my_project

# åˆ›å»ºæ–°çš„åº“é¡¹ç›®
cargo new my_lib --lib

# åœ¨å½“å‰ç›®å½•åˆå§‹åŒ–é¡¹ç›®
cargo init

# æŒ‡å®šç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆé»˜è®¤ gitï¼‰
cargo new my_project --vcs=git
cargo new my_project --vcs=none
```

#### é¡¹ç›®æ„å»ºä¸è¿è¡Œ

```bash
# ç¼–è¯‘é¡¹ç›®ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰
cargo build

# ç¼–è¯‘é¡¹ç›®ï¼ˆå‘å¸ƒæ¨¡å¼ï¼Œä¼˜åŒ–ï¼‰
cargo build --release

# ç¼–è¯‘å¹¶è¿è¡Œ
cargo run

# å‘å¸ƒæ¨¡å¼è¿è¡Œ
cargo run --release

# é™é»˜è¿è¡Œï¼ˆå‡å°‘è¾“å‡ºï¼‰
cargo run -q

# è¯¦ç»†è¾“å‡º
cargo run -v

# åªæ£€æŸ¥ä»£ç ï¼Œä¸ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰
cargo check
```

#### æµ‹è¯•ä¸æ–‡æ¡£

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_function_name

# ç”Ÿæˆå¹¶æ‰“å¼€é¡¹ç›®æ–‡æ¡£
cargo doc --open

# ç”Ÿæˆæ–‡æ¡£ï¼ˆä¸æ‰“å¼€ï¼‰
cargo doc

# è¿è¡Œæ–‡æ¡£æµ‹è¯•
cargo test --doc
```

#### é¡¹ç›®ç»´æŠ¤

```bash
# æ¸…ç†æ„å»ºäº§ç‰©
cargo clean

# æ›´æ–°ä¾èµ–åˆ°æœ€æ–°å…¼å®¹ç‰ˆæœ¬
cargo update

# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# ä»£ç æ£€æŸ¥å’Œå»ºè®®
cargo clippy

# å®¡è®¡ä¾èµ–çš„å®‰å…¨æ¼æ´
cargo audit  # éœ€è¦å…ˆå®‰è£…ï¼šcargo install cargo-audit
```

#### å‘å¸ƒç®¡ç†

```bash
# å‘å¸ƒåˆ° crates.io
cargo publish

# éªŒè¯å‘å¸ƒåŒ…
cargo package

# æ£€æŸ¥å‘å¸ƒåŒ…å†…å®¹
cargo package --list
```

### rustfmt - ä»£ç æ ¼å¼åŒ–

```bash
# æ ¼å¼åŒ–å½“å‰é¡¹ç›®æ‰€æœ‰ Rust æ–‡ä»¶
cargo fmt

# æ ¼å¼åŒ–å•ä¸ªæ–‡ä»¶
rustfmt src/main.rs

# æ£€æŸ¥æ ¼å¼ä½†ä¸ä¿®æ”¹
cargo fmt -- --check

# è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ rustfmt.toml
echo 'max_width = 120' > rustfmt.toml
```

### clippy - ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ clippy æ£€æŸ¥
cargo clippy

# å°†è­¦å‘Šè§†ä¸ºé”™è¯¯
cargo clippy -- -D warnings

# ä¿®å¤å¯è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜
cargo clippy --fix
```

## é…ç½®é•œåƒæº

åœ¨ä¸­å›½å¤§é™†ï¼Œå»ºè®®é…ç½®é•œåƒæºä»¥åŠ é€Ÿä¾èµ–ä¸‹è½½ã€‚

åˆ›å»ºæˆ–ç¼–è¾‘ `~/.cargo/config.toml` æ–‡ä»¶ï¼š

```toml
# å­—èŠ‚è·³åŠ¨æºï¼ˆæ¨èï¼‰
[source.crates-io]
replace-with = 'rsproxy'

[source.rsproxy]
registry = "https://rsproxy.cn/crates.io-index"

# ç¨€ç–ç´¢å¼•ï¼ˆCargo >= 1.68ï¼‰
[source.rsproxy-sparse]
registry = "sparse+https://rsproxy.cn/index/"

[registries.rsproxy]
index = "https://rsproxy.cn/crates.io-index"

# ç½‘ç»œé…ç½®
[net]
git-fetch-with-cli = true

# å…¶ä»–é•œåƒæºé€‰æ‹©

# æ¸…åå¤§å­¦æº
[source.tuna]
registry = "https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"

# ä¸­ç§‘å¤§æº
[source.ustc]
registry = "git://mirrors.ustc.edu.cn/crates.io-index"

# ä½¿ç”¨æ—¶å°†ä¸Šé¢çš„ replace-with æ”¹ä¸ºå¯¹åº”çš„æºåç§°
```

## å¼€å‘ç¯å¢ƒé…ç½®

### VS Code æ‰©å±•æ¨è

```bash
# å¿…è£…æ‰©å±•
code --install-extension rust-lang.rust-analyzer  # å®˜æ–¹è¯­è¨€æœåŠ¡å™¨
code --install-extension vadimcn.vscode-lldb      # è°ƒè¯•å™¨
```

### Jupyter Notebook æ”¯æŒ

åœ¨ Jupyter ä¸­è¿è¡Œ Rust ä»£ç ï¼š

```bash
# æ›´æ–° Rust
rustup update

# å®‰è£… evcxr_jupyter
cargo install evcxr_jupyter

# å®‰è£…åˆ° Jupyter
evcxr_jupyter --install

# å¯åŠ¨ Jupyter
jupyter lab
```

### Cargo.toml é…ç½®ç¤ºä¾‹

```toml
[package]
name = "my_project"
version = "0.1.0"
edition = "2021"
authors = ["Your Name <your.email@example.com>"]
description = "A sample Rust project"
license = "MIT"
repository = "https://github.com/username/my_project"

[dependencies]
serde = { version = "1.0", features = ["derive"] }
tokio = { version = "1.0", features = ["full"] }

[dev-dependencies]
criterion = "0.5"

[[bin]]
name = "my_binary"
path = "src/bin/my_binary.rs"

[[example]]
name = "example_name"
path = "examples/example_name.rs"
```

## å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `cargo new <name>` | åˆ›å»ºæ–°é¡¹ç›® |
| `cargo build` | ç¼–è¯‘é¡¹ç›® |
| `cargo run` | ç¼–è¯‘å¹¶è¿è¡Œ |
| `cargo test` | è¿è¡Œæµ‹è¯• |
| `cargo check` | å¿«é€Ÿè¯­æ³•æ£€æŸ¥ |
| `cargo fmt` | æ ¼å¼åŒ–ä»£ç  |
| `cargo clippy` | ä»£ç æ£€æŸ¥ |
| `cargo doc` | ç”Ÿæˆæ–‡æ¡£ |
| `cargo clean` | æ¸…ç†æ„å»ºæ–‡ä»¶ |
| `cargo update` | æ›´æ–°ä¾èµ– |
| `rustup update` | æ›´æ–° Rust |

è¿™æ ·ä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ Rust å¼€å‘ç¯å¢ƒï¼ä»åŸºæœ¬æ¦‚å¿µåˆ°å®é™…å¼€å‘å·¥å…·ï¼Œè¿™ä»½æŒ‡å—åº”è¯¥èƒ½å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ Rust ç¼–ç¨‹ã€‚
